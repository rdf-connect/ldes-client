# immutable
@prefix ldes: <https://w3id.org/ldes#>.
@prefix tree: <https://w3id.org/tree#>.
@prefix sh: <http://www.w3.org/ns/shacl#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix ex: <http://example.org/>.
@prefix : <http://localhost:3000/>.

<mock-ldes-reverse.ttl> a ldes:EventStream;
  ldes:timestampPath ex:modified;
  ldes:versionOfPath ex:isVersionOf;
  tree:shape [
    a sh:NodeShape;
    sh:targetClass ex:Clazz1;
    sh:property [
      a sh:PropertyShape;
      sh:path ex:modified;
      sh:datatype xsd:dateTime;
    ], [
      a sh:PropertyShape;
      sh:path ex:prop1;
      sh:node [
        a sh:NodeShape;
        sh:targetClass ex:Clazz2;
      ];
    ];
  ];
  tree:view <mock-ldes-reverse-0.ttl>;
  tree:member <mem3#1>, <mem2#1>, <mem1#1>.

<mock-ldes-reverse-1.ttl> a tree:Node;
  tree:relation [
    a tree:LessThanOrEqualToRelation;
    tree:node <mock-ldes-reverse-2.ttl>;
    tree:path ex:modified;
    tree:value "2024-07-12T23:59:59.999Z"^^xsd:dateTime;
  ], [
    a tree:GreaterThanRelation;
    tree:node <mock-ldes-reverse-0.ttl>;
    tree:path ex:modified;
    tree:value "2024-07-13T23:59:59.999Z"^^xsd:dateTime;
  ].

<mem1#1> a ex:Clazz1;
  ex:isVersionOf <mem1>;
  ex:prop1 <submem1>;
  ex:prop2 "value";
  ex:modified "2024-07-13T09:00:00.000Z"^^xsd:dateTime.

<submem1> a ex:Clazz2;
  ex:subprop "sub-value".

<mem2#1> a ex:Clazz1;
  ex:isVersionOf <mem2>;
  ex:prop1 <submem2>;
  ex:prop2 "value";
  ex:modified "2024-07-13T20:15:00.000Z"^^xsd:dateTime.

<submem2> a ex:Clazz2;
  ex:subprop "sub-value".

<mem3#1> a ex:Clazz1;
  ex:isVersionOf <mem3>;
  ex:prop1 <submem3>;
  ex:prop2 "value";
  ex:modified "2024-07-13T20:45:00.000Z"^^xsd:dateTime.

<submem3> a ex:Clazz2;
  ex:subprop "sub-value".

